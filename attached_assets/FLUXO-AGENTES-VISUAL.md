# ğŸ• Fluxo Visual: Wilson â†’ SDR â†’ Supabase

## ğŸ¯ Exemplo 1: Cliente Novo Faz Pedido

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CLIENTE (WhatsApp)                                           â”‚
â”‚ "Oi! Quero pedir uma pizza calabresa grande"                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WILSON (Agente Principal)                                    â”‚
â”‚                                                              â”‚
â”‚ 1. SaudaÃ§Ã£o: "Bem-vindo Ã  Wilson Pizza! ğŸ•"               â”‚
â”‚ 2. Pergunta: "Qual seu telefone com DDD?"                   â”‚
â”‚                                                              â”‚
â”‚ [AÃ‡ÃƒO SILENCIOSA]                                           â”‚
â”‚ Wilson chama SDR:                                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ <tool>                                                   â”‚ â”‚
â”‚ â”‚ validar_cliente: telefone=+5587999999999               â”‚ â”‚
â”‚ â”‚ </tool>                                                 â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AGENTE SDR (Orquestrador de Dados)                          â”‚
â”‚                                                              â”‚
â”‚ RECEBIDO: validar_cliente(telefone: +5587999999999)        â”‚
â”‚                                                              â”‚
â”‚ 1. Busca em BD:                                             â”‚
â”‚    Tool: validar_cliente                                    â”‚
â”‚    SELECT * FROM clientes WHERE telefone = ...              â”‚
â”‚                                                              â”‚
â”‚ 2. Resposta:                                                â”‚
â”‚    {                                                         â”‚
â”‚      status: "new_client",                                  â”‚
â”‚      dados: {                                               â”‚
â”‚        telefone: "+5587999999999",                          â”‚
â”‚        ready_to_register: true                              â”‚
â”‚      }                                                       â”‚
â”‚    }                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WILSON (Agente Principal)                                    â”‚
â”‚                                                              â”‚
â”‚ Recebeu: status="new_client"                               â”‚
â”‚                                                              â”‚
â”‚ Responde ao cliente:                                        â”‚
â”‚ "Bem-vindo! Vou cadastrar seus dados. Qual seu nome?"      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CLIENTE                                                      â”‚
â”‚ "Meu nome Ã© JoÃ£o Silva"                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WILSON (Agente Principal)                                    â”‚
â”‚                                                              â”‚
â”‚ [AÃ‡ÃƒO SILENCIOSA]                                           â”‚
â”‚ Wilson chama SDR:                                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ <tool>                                                   â”‚ â”‚
â”‚ â”‚ criar_cliente: nome=JoÃ£o Silva,                         â”‚ â”‚
â”‚ â”‚               telefone=+5587999999999                  â”‚ â”‚
â”‚ â”‚ </tool>                                                 â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AGENTE SDR                                                   â”‚
â”‚                                                              â”‚
â”‚ RECEBIDO: criar_cliente(nome, telefone)                    â”‚
â”‚                                                              â”‚
â”‚ 1. Valida dados                                             â”‚
â”‚ 2. Insere em BD:                                            â”‚
â”‚    Tool: criar_cliente                                      â”‚
â”‚    INSERT INTO clientes (nome, telefone) VALUES (...)       â”‚
â”‚                                                              â”‚
â”‚ 3. Resposta:                                                â”‚
â”‚    {                                                         â”‚
â”‚      status: "created",                                     â”‚
â”‚      dados: {                                               â”‚
â”‚        cliente_id: "uuid-123",                              â”‚
â”‚        nome: "JoÃ£o Silva"                                   â”‚
â”‚      }                                                       â”‚
â”‚    }                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WILSON (Agente Principal)                                    â”‚
â”‚                                                              â”‚
â”‚ Recebeu: cliente_id="uuid-123" + status="created"          â”‚
â”‚                                                              â”‚
â”‚ Responde ao cliente:                                        â”‚
â”‚ "Perfeito JoÃ£o! Agora vem a boa parte! ğŸ•                â”‚
â”‚  Qual sabor vocÃª quer?"                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CLIENTE                                                      â”‚
â”‚ "Calabresa"                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WILSON (Agente Principal)                                    â”‚
â”‚                                                              â”‚
â”‚ [AÃ‡ÃƒO SILENCIOSA]                                           â”‚
â”‚ Wilson chama SDR:                                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ <tool>                                                   â”‚ â”‚
â”‚ â”‚ buscar_produto: nome_item=Calabresa                    â”‚ â”‚
â”‚ â”‚ </tool>                                                 â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AGENTE SDR                                                   â”‚
â”‚                                                              â”‚
â”‚ RECEBIDO: buscar_produto(nome_item: "Calabresa")           â”‚
â”‚                                                              â”‚
â”‚ 1. Busca em BD:                                             â”‚
â”‚    Tool: buscar_produto                                     â”‚
â”‚    SELECT * FROM cardapio WHERE nome_item LIKE "%Calabresa%"â”‚
â”‚                                                              â”‚
â”‚ 2. Resposta:                                                â”‚
â”‚    {                                                         â”‚
â”‚      status: "found",                                       â”‚
â”‚      dados: {                                               â”‚
â”‚        nome_item: "Calabresa",                              â”‚
â”‚        precos: {                                            â”‚
â”‚          "p": 28.00,                                        â”‚
â”‚          "m": 38.00,                                        â”‚
â”‚          "g": 46.00,                                        â”‚
â”‚          "gg": 60.00,                                       â”‚
â”‚          "super": 73.00                                     â”‚
â”‚        }                                                     â”‚
â”‚      }                                                       â”‚
â”‚    }                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WILSON (Agente Principal)                                    â”‚
â”‚                                                              â”‚
â”‚ Recebeu: precos da Calabresa                               â”‚
â”‚                                                              â”‚
â”‚ Responde ao cliente:                                        â”‚
â”‚ "ğŸ• Calabresa - Ingredientes: calabresa, mussarela, etc   â”‚
â”‚  PreÃ§os:                                                    â”‚
â”‚  - P: R$ 28                                                 â”‚
â”‚  - M: R$ 38                                                 â”‚
â”‚  - G: R$ 46                                                 â”‚
â”‚  - GG: R$ 60                                                â”‚
â”‚  - Super: R$ 73                                             â”‚
â”‚                                                              â”‚
â”‚  Qual tamanho?"                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CLIENTE                                                      â”‚
â”‚ "Grande"                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WILSON (Agente Principal)                                    â”‚
â”‚                                                              â”‚
â”‚ Wilson tem:                                                 â”‚
â”‚ - cliente_id: uuid-123                                      â”‚
â”‚ - cliente_nome: JoÃ£o Silva                                  â”‚
â”‚ - cliente_telefone: +5587999999999                         â”‚
â”‚ - produto: Calabresa                                        â”‚
â”‚ - tamanho: G (preÃ§o: 46)                                    â”‚
â”‚ - quantidade: 1                                             â”‚
â”‚                                                              â”‚
â”‚ Pergunta: "Qual seu endereÃ§o de entrega?"                  â”‚
â”‚                                                              â”‚
â”‚ Cliente responde e Wilson coleta mais dados...              â”‚
â”‚                                                              â”‚
â”‚ Quando tudo pronto, Wilson chama SDR:                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ <tool>                                                   â”‚ â”‚
â”‚ â”‚ processar_pedido:                                       â”‚ â”‚
â”‚ â”‚   cliente_nome=JoÃ£o Silva,                             â”‚ â”‚
â”‚ â”‚   cliente_telefone=+5587999999999,                    â”‚ â”‚
â”‚ â”‚   forma_pagamento=PIX,                                â”‚ â”‚
â”‚ â”‚   total=46.00,                                         â”‚ â”‚
â”‚ â”‚   itens=[{                                             â”‚ â”‚
â”‚ â”‚     produto_nome: Calabresa,                          â”‚ â”‚
â”‚ â”‚     tamanho: G,                                        â”‚ â”‚
â”‚ â”‚     quantidade: 1,                                     â”‚ â”‚
â”‚ â”‚     preco_unitario: 46.00                             â”‚ â”‚
â”‚ â”‚   }],                                                  â”‚ â”‚
â”‚ â”‚   endereco={rua, numero, bairro, cidade}              â”‚ â”‚
â”‚ â”‚ </tool>                                                 â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AGENTE SDR                                                   â”‚
â”‚                                                              â”‚
â”‚ RECEBIDO: processar_pedido(dados_completos)                â”‚
â”‚                                                              â”‚
â”‚ 1. Valida todos os campos                                   â”‚
â”‚ 2. Cria registro em BD:                                     â”‚
â”‚    Tool: processar_pedido                                   â”‚
â”‚    INSERT INTO pedidos (cliente_nome, total, ...) VALUES (...) â”‚
â”‚    INSERT INTO itens_pedido (pedido_id, produto_nome, ...) â”‚
â”‚                                                              â”‚
â”‚ 3. Resposta:                                                â”‚
â”‚    {                                                         â”‚
â”‚      status: "success",                                     â”‚
â”‚      dados: {                                               â”‚
â”‚        pedido_id: "uuid-order-999",                         â”‚
â”‚        numero_pedido: "12345",                              â”‚
â”‚        cliente_nome: "JoÃ£o Silva",                          â”‚
â”‚        total: 46.00,                                        â”‚
â”‚        status_pedido: "pending"                             â”‚
â”‚      }                                                       â”‚
â”‚    }                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WILSON (Agente Principal)                                    â”‚
â”‚                                                              â”‚
â”‚ Recebeu: numero_pedido="12345" + status="success"          â”‚
â”‚                                                              â”‚
â”‚ Responde ao cliente:                                        â”‚
â”‚ "âœ… PEDIDO CONFIRMADO! ğŸ‰                                 â”‚
â”‚                                                              â”‚
â”‚  NÃºmero: #12345                                             â”‚
â”‚  ğŸ• 1x Calabresa Grande                                    â”‚
â”‚  ğŸ’° Total: R$ 46.00                                         â”‚
â”‚  ğŸ’³ PIX                                                     â”‚
â”‚  ğŸ“ Rua das Flores, 123                                     â”‚
â”‚  â±ï¸ Pronto em 15-30 minutos!                               â”‚
â”‚                                                              â”‚
â”‚  Obrigado pela preferÃªncia! ğŸ™"                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Exemplo 2: Rastrear Pedido

```
CLIENTE: "Qual Ã© o status do meu pedido?"

â†“

WILSON chama SDR:
<tool>
buscar_pedido: cliente_telefone=+5587999999999
</tool>

â†“

SDR retorna pedido completo com status atual

â†“

WILSON responde com status
```

---

## ğŸ¯ Exemplo 3: Calcular Total

```
CLIENTE seleciona:
- 2x Calabresa G
- 1x Refrigerante 2L
- 1x Doce Chocolate

â†“

WILSON chama SDR:
<tool>
calcular_total: itens=[
  {produto_nome: Calabresa, tamanho: G, quantidade: 2},
  {produto_nome: Refrigerante 2L, quantidade: 1},
  {produto_nome: Doce Chocolate, quantidade: 1}
]
</tool>

â†“

SDR:
1. buscar_produto("Calabresa") â†’ G = 46 each
2. buscar_produto("Refrigerante 2L") â†’ 12
3. buscar_produto("Doce Chocolate") â†’ 35
4. Calcular: (46Ã—2) + 12 + 35 = 139

â†“

SDR retorna:
{
  status: "success",
  total: 139.00,
  itens_calculados: [...]
}

â†“

WILSON responde:
"Total: R$ 139.00"
```

---

## ğŸ“Š Fluxo de Dados

```
WILSON (Coleta)           â†’  SDR (Processa)        â†’  SUPABASE (Persiste)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Nome do cliente           â†’  validar_cliente()      â†’  clientes TABLE
Telefone                  â†’  criar_cliente()        â†’  clientes TABLE
                          
Produto                   â†’  buscar_produto()       â†’  cardapio TABLE
Tamanho                   â†’  calcular_total()       â†’  precos JSONB
Quantidade                â†’  
                          
EndereÃ§o                  â†’  validar_endereco()     â†’  enderecos TABLE
                          â†’  
Forma de pagamento        â†’  processar_pedido()     â†’  pedidos TABLE
ObservaÃ§Ãµes               â†’  processar_pedido()     â†’  itens_pedido TABLE
```

---

## ğŸ”„ Status do Pedido (Lifecycle)

```
CriaÃ§Ã£o:
"pending" (novo pedido, aguardando confirmaÃ§Ã£o)
   â†“
WILSON confirma ao cliente
   â†“
ProduÃ§Ã£o:
"confirmed" â†’ "production" (cozinha estÃ¡ fazendo)
   â†“
Entrega:
"ready" (pronto para sair) â†’ "sent" (em entrega)
   â†“
Finalizado:
"delivered" (chegou) OU "cancelled" (cancelado)
```

---

## ğŸ› ï¸ Estrutura das Tools

```
Cada tool Ã© uma OPERAÃ‡ÃƒO do Supabase:

validar_abertura      â†’ SELECT * FROM horarios_funcionamento
validar_cliente       â†’ SELECT * FROM clientes WHERE telefone = ?
buscar_produto        â†’ SELECT * FROM cardapio WHERE nome LIKE ?
processar_pedido      â†’ INSERT INTO pedidos + itens_pedido
processar_pedido_formatado â†’ PARSE + INSERT
calcular_total        â†’ SELECT precos + MATH
buscar_pedido         â†’ SELECT * FROM pedidos WHERE id/telefone = ?
atualizar_status_pedido â†’ UPDATE pedidos SET status = ?
validar_endereco      â†’ VALIDATE campos obrigatÃ³rios
sugerir_complemento   â†’ SELECT * FROM cardapio WHERE categoria IN (bebidas, doces)
criar_cliente         â†’ INSERT INTO clientes
```

---

**Resumo:** Wilson Ã© o ROSTO, SDR Ã© o MOTOR, Supabase Ã© a MEMÃ“RIA. ğŸ•âœ¨
